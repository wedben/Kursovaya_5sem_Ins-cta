# Текст для отчета по курсовому проекту

## 1. ВВЕДЕНИЕ

В современном мире информационные технологии играют ключевую роль в различных областях науки и практики. Особую актуальность приобретают системы, позволяющие эффективно работать с большими объемами данных и предоставляющие пользователям удобные инструменты для поиска и анализа информации.

Одной из важных задач в области биологии и экологии является идентификация видов насекомых. Энтомологи, натуралисты и любители природы часто сталкиваются с необходимостью определения вида насекомого по его внешним характеристикам. Традиционные определители в виде книг и справочников имеют ряд ограничений: они статичны, требуют последовательного просмотра множества страниц и не позволяют быстро найти нужный вид по комбинации признаков.

Разработка веб-приложения для определения насекомых с использованием базы данных решает эти проблемы, предоставляя пользователям интерактивный инструмент для быстрого поиска видов по различным характеристикам. Такая система позволяет эффективно хранить, структурировать и обрабатывать информацию о насекомых, а также обеспечивает удобный интерфейс для работы с данными.

**Цель курсового проекта** – разработать веб-приложение для определения насекомых (стрекоз, жуков и бабочек) с использованием реляционной базы данных PostgreSQL.

**Задачи проекта:**
1. Спроектировать структуру базы данных для хранения информации о насекомых различных типов
2. Реализовать систему поиска насекомых по множественным критериям
3. Разработать веб-интерфейс с использованием современных технологий (Flask, Vue.js)
4. Обеспечить удобный пользовательский интерфейс с фильтрацией и визуализацией результатов
5. Реализовать систему управления данными (импорт, экспорт, добавление записей)

**Объект исследования** – процесс идентификации насекомых по морфологическим и экологическим признакам.

**Предмет исследования** – методы и технологии разработки веб-приложений для работы с базами данных в контексте биологической систематики.

---

## 2. РЕАЛИЗАЦИЯ ПРИЛОЖЕНИЯ ДЛЯ РАБОТЫ С БД

### 2.1. Архитектура приложения

Разработанное веб-приложение построено по классической трехзвенной архитектуре (three-tier architecture), которая включает:

1. **Уровень представления (Presentation Layer)** – клиентская часть на основе Vue.js 3, обеспечивающая интерактивный пользовательский интерфейс
2. **Уровень бизнес-логики (Business Logic Layer)** – серверная часть на Flask, обрабатывающая запросы и реализующая API
3. **Уровень данных (Data Layer)** – реляционная база данных PostgreSQL для хранения информации о насекомых

Такая архитектура обеспечивает разделение ответственности между компонентами системы, что упрощает разработку, тестирование и поддержку приложения.

### 2.2. Выбор технологий

Для реализации проекта были выбраны следующие технологии:

**Backend:**
- **Python 3** – высокоуровневый язык программирования с богатой экосистемой библиотек
- **Flask 3.0.0** – легковесный веб-фреймворк для создания RESTful API
- **psycopg2** – адаптер PostgreSQL для Python, обеспечивающий надежное подключение к базе данных
- **python-dotenv** – библиотека для работы с переменными окружения

**Frontend:**
- **Vue.js 3** – прогрессивный JavaScript-фреймворк для создания реактивных пользовательских интерфейсов
- **HTML5/CSS3** – современные веб-стандарты для структурирования и стилизации контента

**База данных:**
- **PostgreSQL 14** – мощная объектно-реляционная СУБД с поддержкой сложных запросов, триггеров, хранимых процедур и представлений

### 2.3. Проектирование базы данных

База данных спроектирована с учетом нормализации и включает следующие основные таблицы:

**Таблицы для хранения видов насекомых:**
- `dragonflies` (стрекозы) – содержит информацию о видах стрекоз
- `beetles` (жуки) – содержит информацию о видах жуков
- `butterflies` (бабочки) – содержит информацию о видах бабочек

Каждая из этих таблиц имеет следующую структуру:
- `id` (SERIAL PRIMARY KEY) – уникальный идентификатор
- `name_ru` (VARCHAR(255)) – русское название вида
- `name_lat` (VARCHAR(255)) – латинское название вида
- `size_min`, `size_max` (NUMERIC(10,2)) – диапазон размеров
- `color` (TEXT) – описание окраски
- `habitat` (TEXT) – место обитания
- `season` (TEXT) – период активности
- `description` (TEXT) – подробное описание вида
- `image_url` (TEXT) – ссылка на изображение

**Таблицы для системы наблюдений:**
- `Пользователь` – информация о пользователях системы
- `МестоНаблюдения` – географические точки наблюдений
- `ВидНасекомого` – объединенная таблица всех видов
- `Биотоп` – типы биотопов (лес, луг, водоем и т.д.)
- `СтатусТочности` – статусы точности идентификации
- `Наблюдение` – записи о наблюдениях насекомых
- `Идентификация` – связь наблюдений с видами
- `ВидНасекомого_Биотоп` – связь многие-ко-многим между видами и биотопами

Для оптимизации производительности созданы индексы на часто используемых полях (color, habitat, season).

### 2.4. Реализация модуля работы с базой данных

Модуль `database.py` реализует класс `Database`, который инкапсулирует всю логику работы с базой данных. Основные методы класса:

**`get_connection()`** – устанавливает соединение с PostgreSQL на основе параметров из конфигурационного файла.

**`search_insects(insect_type, params)`** – выполняет поиск насекомых по заданным параметрам. Метод динамически формирует SQL-запрос на основе переданных критериев поиска:
- Общие параметры: размер (size_min, size_max), цвет, место обитания, период активности
- Специфичные для стрекоз: длина тела, размах крыльев, цвет глаз, тип водоема, пол
- Специфичные для жуков: тип поверхности, характеристики надкрылий
- Специфичные для бабочек: особенности рисунка крыльев, время суток (день/ночь)

Метод использует параметризованные запросы для защиты от SQL-инъекций и возвращает результаты в виде списка словарей.

**`get_all_insects(insect_type)`** – получает все записи определенного типа насекомых из базы данных.

**`get_filter_options(insect_type)`** – извлекает уникальные значения для фильтров из базы данных. Метод анализирует данные и предоставляет:
- Базовые варианты для быстрого выбора (например, основные цвета, типичные места обитания)
- Полный список всех доступных значений для точного поиска

Метод использует регулярные выражения для извлечения структурированной информации из текстовых полей описания.

### 2.5. Реализация веб-сервера

Веб-сервер реализован в файле `app.py` с использованием Flask. Приложение предоставляет следующие маршруты:

**`GET /`** – главная страница приложения, отображает интерфейс поиска.

**`POST /api/search`** – API endpoint для поиска насекомых. Принимает JSON с типом насекомого и параметрами поиска, возвращает список найденных результатов.

**`GET /api/all/<insect_type>`** – получение всех насекомых определенного типа.

**`GET /api/filter-options/<insect_type>`** – получение опций для фильтров (цвета, места обитания, периоды и т.д.).

Все endpoints обрабатывают ошибки и возвращают структурированные JSON-ответы с информацией об успехе операции или описанием ошибки.

### 2.6. Реализация пользовательского интерфейса

Пользовательский интерфейс реализован с использованием Vue.js 3 и обеспечивает:

**Интерактивный выбор типа насекомого** – пользователь может выбрать стрекозу, жука или бабочку.

**Динамические фильтры** – в зависимости от выбранного типа насекомого отображаются соответствующие фильтры:
- Для стрекоз: пол, длина тела, размах крыльев, цвет глаз, тип водоема, место нахождения, период
- Для жуков: тип поверхности, надкрылья, место нахождения, период активности
- Для бабочек: особенности рисунка крыльев, время суток, место нахождения, период лёта

**Двухуровневая система фильтрации:**
- Быстрый выбор через кликабельные теги с базовыми вариантами
- Точный поиск через выпадающие списки со всеми доступными значениями из базы данных

**Режим просмотра всех насекомых** – возможность просмотреть все записи в базе данных с поиском и фильтрацией по типу.

**Визуализация результатов** – найденные насекомые отображаются в виде карточек с информацией о виде, включая русское и латинское названия, размеры, цвета, места обитания и подробные описания.

**Адаптивный дизайн** – интерфейс корректно отображается на различных устройствах благодаря использованию современных CSS-технологий.

### 2.7. Система управления данными

Для удобной работы с данными реализованы следующие скрипты:

**`scripts/setup_db.py`** – автоматическая настройка базы данных: создание БД, таблиц и инициализация базовых данных.

**`scripts/import_excel_data.py`** – импорт данных из Excel-файлов в базу данных. Скрипт обрабатывает файлы со стрекозами, жуками и бабочками, парсит размеры, цвета и описания, преобразуя их в структурированный формат для хранения в БД.

**`scripts/run_sql.py`** – выполнение SQL-скриптов для создания представлений, процедур, триггеров и настройки прав доступа.

### 2.8. Дополнительные возможности базы данных

В проекте реализованы следующие объекты базы данных:

**Представления (Views)** – виртуальные таблицы для упрощения сложных запросов и обеспечения удобного доступа к данным.

**Хранимые процедуры** – для выполнения сложных операций с данными на стороне сервера, что повышает производительность и безопасность.

**Триггеры** – для автоматического выполнения действий при изменении данных (например, логирование, валидация).

**Система безопасности** – настройка прав доступа (Row-Level Security) для обеспечения безопасности данных.

### 2.9. Структура проекта

Проект организован в соответствии с лучшими практиками разработки:

```
kursach/
├── app.py                    # Flask приложение
├── config.py                 # Конфигурация БД
├── database.py               # Модуль работы с БД
├── sql/                      # SQL скрипты
├── scripts/                  # Скрипты настройки и импорта
├── data/                     # Исходные Excel файлы
├── static/                   # Статические файлы (CSS, JS, изображения)
└── templates/                # HTML шаблоны
```

Такая структура обеспечивает логическое разделение компонентов и упрощает поддержку проекта.

---

## 3. ЗАКЛЮЧЕНИЕ

В ходе выполнения курсового проекта было разработано веб-приложение для определения насекомых с использованием реляционной базы данных PostgreSQL. Приложение позволяет эффективно хранить, структурировать и обрабатывать информацию о различных видах насекомых (стрекозах, жуках и бабочках), а также предоставляет пользователям удобный инструмент для поиска видов по множественным критериям.

**Основные достижения проекта:**

1. **Спроектирована и реализована база данных** с нормализованной структурой, включающая таблицы для хранения информации о насекомых и систему наблюдений. База данных поддерживает индексацию для оптимизации запросов и включает дополнительные объекты (представления, процедуры, триггеры) для расширенной функциональности.

2. **Разработан модуль работы с базой данных**, который инкапсулирует всю логику взаимодействия с PostgreSQL. Модуль обеспечивает безопасность через параметризованные запросы и предоставляет гибкий API для поиска и извлечения данных.

3. **Создан веб-интерфейс** с использованием современных технологий (Flask, Vue.js), обеспечивающий интерактивное взаимодействие с пользователем. Интерфейс поддерживает динамическую фильтрацию, двухуровневую систему выбора параметров и адаптивный дизайн.

4. **Реализована система управления данными**, включающая скрипты для автоматической настройки базы данных и импорта данных из внешних источников (Excel-файлы).

5. **Обеспечена масштабируемость и расширяемость** системы за счет модульной архитектуры и четкого разделения ответственности между компонентами.

**Практическая значимость:**

Разработанное приложение может быть использовано:
- Энтомологами и биологами для быстрой идентификации видов насекомых
- Студентами и преподавателями в образовательных целях
- Натуралистами и любителями природы для определения встреченных видов
- В качестве основы для более сложных систем мониторинга и учета насекомых

**Перспективы развития:**

В дальнейшем приложение может быть расширено следующими функциями:
- Добавление изображений насекомых для визуальной идентификации
- Реализация системы пользователей с личными коллекциями наблюдений
- Интеграция с картографическими сервисами для визуализации мест обитания
- Добавление статистики и аналитики по встречаемости видов
- Разработка мобильного приложения для полевых наблюдений
- Интеграция с системами машинного обучения для автоматической идентификации по фотографиям

**Выводы:**

Проект успешно демонстрирует применение современных веб-технологий и систем управления базами данных для решения практических задач в области биологии. Разработанное приложение является полнофункциональным инструментом, готовым к использованию и дальнейшему развитию. Использование реляционной базы данных PostgreSQL обеспечивает надежность, производительность и возможность сложных запросов, а современный веб-интерфейс делает систему доступной и удобной для широкого круга пользователей.

