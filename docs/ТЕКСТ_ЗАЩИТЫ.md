# ТЕКСТ ЗАЩИТЫ КУРСОВОГО ПРОЕКТА

## СЛАЙД 1: Титульный слайд

Добрый день! Вашему вниманию представляется курсовая работа на тему: **"Проектирование и реализация реляционной базы данных для системы идентификации видов насекомых по их описанию"**.

В ходе выполнения работы была разработана полнофункциональная веб-система, позволяющая идентифицировать виды насекомых по их морфологическим и экологическим характеристикам с использованием современной реляционной базы данных PostgreSQL.

---

## СЛАЙД 2: Введение

**Предметная область** нашего проекта – это система идентификации видов насекомых по их описанию. Данная задача является актуальной в современной энтомологии, биологии и экологии, так как традиционные определители в виде книг и справочников имеют ряд ограничений: они статичны, требуют последовательного просмотра множества страниц и не позволяют быстро найти нужный вид по комбинации признаков.

**Источники данных** для нашей системы включают:
- Научные публикации по энтомологии, содержащие описания видов, их морфологических признаков и экологических характеристик
- Атласы-определители насекомых, которые являются классическими источниками информации о видах
- Данные о таксономии, биотопах и наблюдениях, собранные в ходе полевых исследований

**Методы проектирования**, использованные в работе:
- **Анализ предметной области** – глубокое изучение требований и особенностей работы с энтомологическими данными
- **ER-моделирование** – создание концептуальной модели данных с использованием диаграмм "сущность-связь"
- **Нормализация данных** – приведение структуры базы данных к нормальным формам для обеспечения целостности и минимизации избыточности

---

## СЛАЙД 3: Анализ предметной области

В ходе тщательного анализа предметной области были выделены следующие основные сущности базы данных:

1. **ВидНасекомого** – центральная сущность, объединяющая все виды насекомых независимо от их таксономической принадлежности. Эта сущность содержит общую информацию о виде: русское и латинское названия, размеры, описание.

2. **Стрекоза** – специализированная сущность для хранения информации о стрекозах. Содержит специфические характеристики: длина тела, размах крыльев, цвет глаз, тип водоема, пол (важно, так как самки и самцы многих видов сильно отличаются).

3. **Бабочка** – сущность для бабочек с характеристиками: размах крыльев, особенности рисунка крыльев, время суток активности (дневные/ночные), период лёта.

4. **ЖукЖесткокрылый** (или просто Жук) – сущность для жуков с признаками: тип поверхности надкрылий, их структура, особенности блеска.

5. **Сезонность** – информация о периодах активности насекомых (весна, лето, осень, конкретные месяцы).

6. **Биотоп** – типы мест обитания: лес, луг, водоем, болото, сад и другие. Связь между видами и биотопами реализована как многие-ко-многим, так как один вид может обитать в нескольких биотопах.

7. **Регион** – географическая информация о местах обитания видов.

8. **МестоНаблюдения** – конкретные географические точки, где проводились наблюдения насекомых, с возможностью хранения координат.

9. **Пользователь** – сущность для хранения информации о пользователях системы (энтомологах, натуралистах, исследователях).

10. **Наблюдение** – записи о конкретных наблюдениях насекомых в природе, включающие дату, время суток, место наблюдения.

11. **Идентификация** – связь между наблюдениями и определенными видами насекомых, включающая статус точности идентификации.

**Итого было выделено 11 основных категорий данных**, которые полностью покрывают потребности системы идентификации насекомых.

---

## СЛАЙД 4: Бизнес-правила и ограничения

При проектировании базы данных были определены следующие бизнес-правила и ограничения:

1. **Целостность данных**: Каждое насекомое должно иметь уникальный идентификатор и обязательно русское название. Латинское название является опциональным, но желательным для научной точности.

2. **Ограничения на размеры**: Размеры насекомых хранятся в миллиметрах с точностью до двух знаков после запятой. Минимальный размер не может быть больше максимального.

3. **Ограничения на периоды**: Месяц наблюдения должен быть в диапазоне от 1 до 12. Часть суток может принимать только определенные значения: утро, день, вечер, ночь.

4. **Связи между сущностями**: 
   - Одно наблюдение может быть связано с несколькими идентификациями (если вид определен неоднозначно)
   - Один вид может обитать в нескольких биотопах
   - Одно место наблюдения может использоваться в множестве наблюдений

5. **Ограничения на типы насекомых**: Тип насекомого в таблице ВидНасекомого может быть только одним из трех: стрекоза, жук или бабочка.

6. **Уникальность наблюдений**: Комбинация пользователя, места наблюдения, даты и части суток должна быть уникальной, так как одно наблюдение не может быть зарегистрировано дважды.

Эти правила обеспечивают корректность и непротиворечивость данных в системе.

---

## СЛАЙД 5: Пользователи и их задачи

Система предназначена для следующих категорий пользователей:

1. **Энтомологи и биологи** – профессиональные исследователи, которые:
   - Идентифицируют виды насекомых по морфологическим признакам
   - Вносят данные о новых наблюдениях
   - Анализируют распределение видов по биотопам и регионам
   - Используют систему для научных исследований

2. **Студенты и преподаватели** – образовательные пользователи, которые:
   - Изучают разнообразие насекомых
   - Используют систему как учебное пособие
   - Проводят практические занятия по определению видов

3. **Натуралисты и любители природы** – непрофессиональные пользователи, которые:
   - Определяют встреченных насекомых по описанию
   - Ведют личные записи наблюдений
   - Изучают фауну своего региона

**Основные задачи**, которые решает система для всех категорий пользователей:
- Быстрый поиск видов по множественным критериям (размер, цвет, место обитания, период активности)
- Просмотр подробной информации о видах
- Ведение записей о наблюдениях
- Анализ данных о встречаемости видов

---

## СЛАЙД 6: ERD (Entity-Relationship Diagram)

ER-диаграмма представляет концептуальную модель данных системы. На диаграмме отражены:

**Основные сущности:**
- ВидНасекомого (центральная сущность)
- Стрекоза, Бабочка, Жук (специализированные сущности)
- Биотоп, Регион, МестоНаблюдения (справочные сущности)
- Пользователь, Наблюдение, Идентификация (сущности системы наблюдений)

**Типы связей:**
- **Один-к-одному**: между ВидНасекомого и специализированными таблицами (стрекоза, бабочка, жук) – каждый вид относится к одному типу
- **Один-ко-многим**: 
  - Пользователь → Наблюдение (один пользователь делает множество наблюдений)
  - МестоНаблюдения → Наблюдение (одно место используется в множестве наблюдений)
  - Наблюдение → Идентификация (одно наблюдение может иметь несколько идентификаций)
- **Многие-ко-многим**: 
  - ВидНасекомого ↔ Биотоп (один вид обитает в нескольких биотопах, один биотоп содержит множество видов)

**Атрибуты сущностей** включают как обязательные поля (первичные ключи, названия), так и опциональные (описания, изображения).

ER-модель была преобразована в реляционную схему с учетом нормализации до третьей нормальной формы.

---

## СЛАЙД 7: Реляционная схема

Реляционная схема базы данных включает следующие таблицы:

### Основные таблицы видов насекомых:

1. **dragonflies** (Стрекозы):
   - id (SERIAL PRIMARY KEY)
   - name_ru (VARCHAR(255) NOT NULL) – русское название
   - name_lat (VARCHAR(255)) – латинское название
   - size_min, size_max (NUMERIC(10,2)) – диапазон размеров
   - color (TEXT) – описание окраски
   - habitat (TEXT) – место обитания
   - season (TEXT) – период активности
   - description (TEXT) – подробное описание с характеристиками: пол, длина тела, размах крыльев, цвет глаз, тип водоема
   - image_url (TEXT) – ссылка на изображение

2. **beetles** (Жуки) – аналогичная структура с описанием типа поверхности, надкрылий

3. **butterflies** (Бабочки) – структура с описанием рисунка крыльев, времени суток

### Таблицы системы наблюдений:

4. **Пользователь** – информация о пользователях системы
5. **МестоНаблюдения** – географические точки с координатами
6. **ВидНасекомого** – объединенная таблица всех видов
7. **Биотоп** – справочник типов биотопов
8. **СтатусТочности** – справочник статусов идентификации
9. **Наблюдение** – записи о наблюдениях с внешними ключами на Пользователя и МестоНаблюдения
10. **Идентификация** – связь наблюдений с видами, включает статус точности
11. **ВидНасекомого_Биотоп** – связующая таблица для связи многие-ко-многим

**Индексы** созданы на часто используемых полях (color, habitat, season) для оптимизации запросов.

**Ограничения целостности** (FOREIGN KEY) обеспечивают корректность связей между таблицами.

---

## СЛАЙД 8: Реализация базы данных

База данных реализована на **PostgreSQL 14** – мощной объектно-реляционной СУБД, выбранной по следующим причинам:

1. **Надежность и стабильность** – проверенная временем СУБД с высокой надежностью
2. **Расширенные возможности** – поддержка сложных типов данных, полнотекстового поиска
3. **Производительность** – эффективная обработка запросов, оптимизация через индексы
4. **Безопасность** – встроенные механизмы аутентификации и авторизации, Row-Level Security

**Создание структуры** выполнено через SQL-скрипты:
- `create_tables.sql` – создание всех таблиц, индексов, ограничений
- `представления.sql` – виртуальные таблицы для упрощения запросов
- `Процедуры.sql` – хранимые процедуры для сложных операций
- `триггеры-2.sql` – автоматические действия при изменении данных
- `СБ.sql` – настройка безопасности и прав доступа

**Импорт данных** выполнен из Excel-файлов через специальный Python-скрипт, который:
- Парсит данные о стрекозах, жуках и бабочках
- Преобразует размеры из различных форматов (например, "60–72 мм")
- Извлекает структурированную информацию из текстовых описаний
- Валидирует данные перед вставкой

---

## СЛАЙД 9: Архитектура приложения

Приложение построено по **трехзвенной архитектуре** (three-tier architecture):

### 1. Уровень представления (Presentation Layer)
Реализован на **Vue.js 3** – современном прогрессивном JavaScript-фреймворке. Обеспечивает:
- Реактивный пользовательский интерфейс
- Динамическую фильтрацию без перезагрузки страницы
- Адаптивный дизайн для различных устройств
- Интерактивные элементы: теги, выпадающие списки, карточки результатов

### 2. Уровень бизнес-логики (Business Logic Layer)
Реализован на **Flask 3.0.0** – легковесном веб-фреймворке Python. Предоставляет:
- RESTful API для взаимодействия с клиентом
- Обработку запросов поиска
- Валидацию входных данных
- Формирование ответов в формате JSON

### 3. Уровень данных (Data Layer)
**PostgreSQL** с модулем `database.py`, который:
- Инкапсулирует всю логику работы с БД
- Использует параметризованные запросы для безопасности
- Реализует сложную логику поиска по множественным критериям
- Извлекает опции фильтров из базы данных

Такая архитектура обеспечивает разделение ответственности, упрощает разработку и поддержку.

---

## СЛАЙД 10: Функциональность приложения

Приложение предоставляет следующие возможности:

### 1. Поиск насекомых по параметрам
Пользователь может выбрать тип насекомого (стрекоза, жук, бабочка) и указать различные критерии:

**Для стрекоз:**
- Пол (самец/самка) – важно, так как половой диморфизм выражен
- Длина тела (диапазон в мм)
- Размах крыльев (диапазон в мм)
- Цвет глаз (быстрый выбор базовых цветов или точный поиск)
- Основной цвет (теги для быстрого выбора + выпадающий список)
- Место нахождения (базовые варианты + все доступные)
- Тип водоема (среда обитания)
- Период активности

**Для жуков:**
- Тип поверхности / Блеск (глянцевый, матовый и т.д.)
- Надкрылья (гладкие, зернистые и т.д.)
- Место нахождения
- Период активности

**Для бабочек:**
- Особенности рисунка крыльев (пятна, полосы и т.д.)
- Время суток (дневная/ночная)
- Место нахождения
- Период лёта

### 2. Двухуровневая система фильтрации
- **Быстрый выбор** через кликабельные теги с наиболее распространенными вариантами
- **Точный поиск** через выпадающие списки со всеми значениями из базы данных

### 3. Просмотр всех насекомых
Режим просмотра всех записей в базе данных с возможностью:
- Поиска по названию, цвету, месту обитания
- Фильтрации по типу насекомого
- Просмотра подробной информации о каждом виде

### 4. Визуализация результатов
Найденные насекомые отображаются в виде карточек с:
- Русским и латинским названиями
- Размерами
- Описанием окраски
- Местами обитания
- Периодами активности
- Подробными описаниями с выделением специфических признаков

---

## СЛАЙД 11: Технические особенности реализации

### Модуль работы с базой данных (database.py)

Класс `Database` реализует следующие методы:

**`search_insects(insect_type, params)`** – выполняет динамическое формирование SQL-запроса на основе переданных параметров. Метод:
- Использует параметризованные запросы для защиты от SQL-инъекций
- Поддерживает поиск по диапазонам значений (например, размер от X до Y)
- Выполняет поиск в текстовых полях через оператор ILIKE для нечувствительного к регистру поиска
- Возвращает результаты в виде списка словарей для удобной обработки

**`get_filter_options(insect_type)`** – извлекает уникальные значения для фильтров:
- Анализирует данные в базе
- Использует регулярные выражения для извлечения структурированной информации из текстовых описаний
- Предоставляет базовые варианты для быстрого выбора
- Предоставляет полный список всех доступных значений
- Очищает данные от некорректных и избыточных значений

**`get_all_insects(insect_type)`** – получение всех записей определенного типа для режима просмотра.

### Веб-сервер (app.py)

Flask-приложение предоставляет RESTful API:

- **GET /** – главная страница с интерфейсом поиска
- **POST /api/search** – поиск насекомых по параметрам
- **GET /api/all/<insect_type>** – получение всех насекомых типа
- **GET /api/filter-options/<insect_type>** – получение опций фильтров

Все endpoints обрабатывают ошибки и возвращают структурированные JSON-ответы.

### Клиентская часть (app.js)

Vue.js-приложение обеспечивает:
- Реактивное связывание данных
- Асинхронные запросы к API
- Динамическое отображение фильтров в зависимости от выбранного типа
- Обработку результатов поиска и их визуализацию

---

## СЛАЙД 12: Дополнительные возможности базы данных

В проекте реализованы следующие объекты базы данных:

### Представления (Views)
Виртуальные таблицы, которые упрощают сложные запросы и обеспечивают удобный доступ к данным. Например, представление может объединять информацию о виде насекомого с его биотопами.

### Хранимые процедуры
Процедуры выполняют сложные операции с данными на стороне сервера:
- Повышают производительность за счет выполнения на сервере БД
- Обеспечивают безопасность через контроль доступа
- Упрощают выполнение часто используемых операций

### Триггеры
Автоматически выполняют действия при изменении данных:
- Валидация данных перед вставкой
- Логирование изменений
- Поддержание целостности данных
- Вычисление производных значений

### Система безопасности
Настройка прав доступа через Row-Level Security (RLS):
- Ограничение доступа к данным на уровне строк
- Разделение прав для разных категорий пользователей
- Защита конфиденциальной информации

---

## СЛАЙД 13: Результаты и выводы

В результате выполнения курсового проекта:

1. **Спроектирована и реализована реляционная база данных** с нормализованной структурой, включающая 11 основных таблиц и дополнительные объекты (представления, процедуры, триггеры).

2. **Разработано веб-приложение** с современным пользовательским интерфейсом, обеспечивающее:
   - Интерактивный поиск по множественным критериям
   - Двухуровневую систему фильтрации
   - Удобную визуализацию результатов

3. **Реализована система управления данными** с возможностью импорта из внешних источников (Excel-файлы).

4. **Обеспечена безопасность** через параметризованные запросы, валидацию данных и настройку прав доступа.

5. **Достигнута производительность** за счет индексации, оптимизации запросов и использования хранимых процедур.

**Практическая значимость:**
Система может использоваться энтомологами, биологами, студентами и натуралистами для быстрой идентификации видов насекомых, что значительно упрощает работу по сравнению с традиционными определителями.

**Перспективы развития:**
- Добавление изображений для визуальной идентификации
- Интеграция с картографическими сервисами
- Разработка мобильного приложения
- Интеграция с системами машинного обучения

---

## ЗАКЛЮЧЕНИЕ

Проект успешно демонстрирует применение современных технологий веб-разработки и систем управления базами данных для решения практических задач в области биологии. Разработанная система является полнофункциональным инструментом, готовым к использованию и дальнейшему развитию.

Использование PostgreSQL обеспечивает надежность, производительность и возможность сложных запросов, а современный веб-интерфейс делает систему доступной и удобной для широкого круга пользователей.

**Спасибо за внимание! Готов ответить на ваши вопросы.**

